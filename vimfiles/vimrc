try
  silent! colorscheme morning
endtry

highlight SpecialKey ctermfg=grey guifg=grey "tab&space

let g:netrwIsOpen=0
let g:netrw_banner = 0
let g:netrw_fastbrowse = 0
let g:netrw_winsize = 30
let mapleader="\<Space>"
let skip_defaults_vim=1

function WinToLin() abort "convert line ends
  update
  e ++ff=dos
  setlocal ff=unix
  set fileencoding=utf8
  set nobomb
endfunction

function! ToggleNetrw() abort
  if g:netrwIsOpen
    let i = bufnr("$")
    while (i >= 1)
      if (getbufvar(i, "&filetype") == "netrw")
        silent exe "bwipeout " . i
      endif
      let i-=1
    endwhile
    let g:netrwIsOpen=0
  else
    let g:netrwIsOpen=1
    silent Lexplore
  endif
endfunction

nnoremap <leader>b :buffers<CR>:buffer<space>
nnoremap <Leader>l :call WinToLin()<CR>
nnoremap <Leader>n :call ToggleNetrw()<CR>
nnoremap <Leader>p :%!python -m json.tool<CR>
nnoremap <Leader>q :bd<CR>
nnoremap <Leader>qq :bd!<CR>
nnoremap <Leader>t :!ctags -R<CR>
nnoremap <S-Tab> :bprevious<CR>
nnoremap <Tab> :bnext<CR>

if !has('nvim')
  if has('win32') || has('win64')
    set renderoptions^=type:directx
  else
    set term=$TERM "Make arrow and other keys work
  endif
endif
if &term == 'xterm' || &term == 'screen'
  set t_Co=256 "Enable 256 colors to stop the CSApprox warning and make xterm vim shine
endif
if has('clipboard')
  set clipboard^=unnamed "On mac and Windows, use * register for copy-paste
  if has('unnamedplus')  "When possible use + register for copy-paste
    set clipboard^=unnamedplus
  endif
endif
if has('statusline')
  set laststatus=2
  set statusline=%F\ %m\%=\%l\/%c\ %{&encoding}
endif
if exists('&ttyfast')
  set ttyfast
endif
if has('termguicolors')
  set notermguicolors
endif
if has('syntax')
  if &diff
    syntax off
  else
    syntax on
    syntax sync minlines=256
    set synmaxcol=256 "performance optimization
    set path+=**
  endif
endif
if v:version > 700
  set omnifunc=syntaxcomplete#Complete
endif
if has('patch-8.1.0360')
  set diffopt=internal,algorithm:patience,indent-heuristic
endif

set backspace=indent,eol,start
set encoding=utf-8
set fileencodings=utf-8,cp1251,koi8-r,cp866
set hidden
set history=5
set hlsearch
set incsearch
set lazyredraw
set linespace=0
set list
set listchars=tab:•·,trail:•,nbsp:¤,extends:»,precedes:«
set matchtime=1
set modelines=0
set mouse=nv "exclude insert mode
set nobackup
set noswapfile
set notitle
set nowritebackup
set shiftwidth=4
set showbreak=¬
set showmatch
set tags=tags;/
set textwidth=0
set ttimeout
set ttimeoutlen=50
set undolevels=32
set viminfo=""
set wildignorecase
set wildmode=list:longest
